<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Form with Firebase</title>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-firestore.js"></script>
</head>
<body>

<h1>Add Data to Firebase</h1>
<form id="dataForm">
    <!-- id -->
    <label for="id">ID:</label>
    <input type="text" id="id" name="id"><br><br>

    <!-- wordJP -->
    <label for="wordJP">Japanese Word:</label>
    <input type="text" id="wordJP" name="wordJP"><br><br>

    <!-- wordJPKanji -->
    <label for="wordJPKanji">Japanese Word (Kanji):</label>
    <input type="text" id="wordJPKanji" name="wordJPKanji"><br><br>

    <!-- wordEN -->
    <label for="wordEN">English Word:</label>
    <input type="text" id="wordEN" name="wordEN"><br><br>

    <!-- descriptionText -->
    <label for="descriptionText">Description:</label>
    <textarea id="descriptionText" name="descriptionText"></textarea><br><br>

    <!-- structurePositiveForms -->
    <label for="structurePositiveForms">Structure Positive Forms:</label>
    <div id="positiveFormsContainer">
        <input type="text" class="positiveFormInput" name="structurePositiveForms[]">
        <button type="button" onclick="addInput('positiveFormsContainer', 'positiveFormInput')">+</button>
    </div><br><br>

    <!-- structureNegativeForms -->
    <label for="structureNegativeForms">Structure Negative Forms:</label>
    <div id="negativeFormsContainer">
        <input type="text" class="negativeFormInput" name="structureNegativeForms[]">
        <button type="button" onclick="addInput('negativeFormsContainer', 'negativeFormInput')">+</button>
    </div><br><br>

    <!-- otherStructures -->
    <label for="otherStructures">Other Structures:</label>
    <div id="otherStructuresContainer">
        <input type="text" class="structureFormInput" name="otherStructures[]">
        <button type="button" onclick="addInput('otherStructuresContainer', 'structureFormInput')">+</button>
    </div><br><br>

    <!-- keyUses -->
    <label for="keyUses">Key Uses:</label>
    <div id="keyUsesContainer">
        <input type="text" class="keyUseInput" name="keyUses[]">
        <button type="button" onclick="addInput('keyUsesContainer', 'keyUseInput')">+</button>
    </div><br><br>

    <!-- comparisons -->
    <label for="comparisons">Comparisons:</label>
    <div id="comparisonsContainer">
        <input type="text" class="comparisonInput" name="comparisons[]">
        <button type="button" onclick="addInput('comparisonsContainer', 'comparisonInput')">+</button>
    </div><br><br>

    <!-- relatedVerbs -->
    <label for="relatedVerbs">Related Verbs:</label>
    <div id="relatedVerbsContainer">
        <input type="text" class="relatedVerbInput" name="relatedVerbs[]">
        <button type="button" onclick="addInput('relatedVerbsContainer', 'relatedVerbInput')">+</button>
    </div><br><br>

    <!-- level -->
    <label for="level">Level:</label>
    <input type="text" id="level" name="level"><br><br>

    <!-- isPremium -->
    <label for="isPremium">Is Premium:</label>
    <input type="checkbox" id="isPremium" name="isPremium"><br><br>

    <button type="submit">Submit</button>
</form>

<script>
    // Firebase Configuration
    const firebaseConfig = {
        apiKey: "YOUR_API_KEY",
        authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
        projectId: "YOUR_PROJECT_ID",
        storageBucket: "YOUR_PROJECT_ID.appspot.com",
        messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
        appId: "YOUR_APP_ID",
        measurementId: "YOUR_MEASUREMENT_ID"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore(app);

    // Function to add new input fields dynamically
    function addInput(containerId, inputClass) {
        const container = document.getElementById(containerId);
        const newInput = document.createElement('input');
        newInput.type = 'text';
        newInput.className = inputClass;
        newInput.name = `${containerId}[]`;
        container.appendChild(newInput);
    }

    // Handle form submission
    document.getElementById('dataForm').addEventListener('submit', function (e) {
        e.preventDefault();

        // Get form data
        const id = document.getElementById('id').value;
        const wordJP = document.getElementById('wordJP').value;
        const wordJPKanji = document.getElementById('wordJPKanji').value;
        const wordEN = document.getElementById('wordEN').value;
        const descriptionText = document.getElementById('descriptionText').value;
        const structurePositiveForms = Array.from(document.getElementsByClassName('positiveFormInput')).map(input => input.value);
        const structureNegativeForms = Array.from(document.getElementsByClassName('negativeFormInput')).map(input => input.value);
        const otherStructures = Array.from(document.getElementsByClassName('structureFormInput')).map(input => input.value);
        const keyUses = Array.from(document.getElementsByClassName('keyUseInput')).map(input => input.value);
        const comparisons = Array.from(document.getElementsByClassName('comparisonInput')).map(input => input.value);
        const relatedVerbs = Array.from(document.getElementsByClassName('relatedVerbInput')).map(input => input.value);
        const level = document.getElementById('level').value;
        const isPremium = document.getElementById('isPremium').checked;

        // Add to Firestore
        db.collection("vocabs").add({
            id: id,
            wordJP: wordJP,
            wordJPKanji: wordJPKanji,
            wordEN: wordEN,
            descriptionText: descriptionText,
            structurePositiveForms: structurePositiveForms,
            structureNegativeForms: structureNegativeForms,
            otherStructures: otherStructures.map(structure => ({ structureForm: structure })), // Adjust for ExampleSentence if needed
            keyUses: keyUses.map(use => ({ title: use, descriptionText: 'Example Description' })), // Adjust for ContentSection
            comparisons: comparisons.map(comp => ({ title: comp, descriptionText: 'Comparison example' })), // Adjust for ContentSection
            relatedVerbs: relatedVerbs.map(verb => db.doc(`vocabs/${verb}`)), // Assuming you store related verbs as document references
            level: level,
            isPremium: isPremium,
        })
        .then(() => {
            alert('Data added successfully!');
            document.getElementById('dataForm').reset();
        })
        .catch((error) => {
            console.error("Error adding document: ", error);
            alert('Error adding data');
        });
    });
</script>

</body>
</html>
